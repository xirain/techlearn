<button id="theme-toggle" class="btn" style="margin-left: 1rem;">
  <span id="theme-toggle-icon">ğŸŒ™</span>
</button>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const toggleButton = document.getElementById('theme-toggle');
  const toggleIcon = document.getElementById('theme-toggle-icon');

  if (!toggleButton || !toggleIcon) return;

  // Get current theme from localStorage or default to dark
  let currentTheme = localStorage.getItem('jtd-theme') || 'dark';

  // Apply theme on page load
  if (typeof jtd !== 'undefined' && jtd.setTheme) {
    jtd.setTheme(currentTheme);
  }
  updateIcon(currentTheme);

  // Toggle theme on button click
  toggleButton.addEventListener('click', function(e) {
    e.preventDefault();
    currentTheme = currentTheme === 'dark' ? 'light' : 'dark';

    if (typeof jtd !== 'undefined' && jtd.setTheme) {
      jtd.setTheme(currentTheme);
    }

    localStorage.setItem('jtd-theme', currentTheme);
    updateIcon(currentTheme);

    console.log('Theme switched to:', currentTheme);
  });

  function updateIcon(theme) {
    toggleIcon.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
    toggleButton.setAttribute('aria-label', theme === 'dark' ? 'åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼' : 'åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼');
    toggleButton.setAttribute('title', theme === 'dark' ? 'åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼' : 'åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼');
  }
});
</script>

<style>
  #theme-toggle {
    font-size: 1.2rem;
    padding: 0.5rem;
    cursor: pointer;
    border: none;
    background: transparent;
    transition: transform 0.2s;
  }

  #theme-toggle:hover {
    transform: scale(1.1);
  }

  #theme-toggle:focus {
    outline: 2px solid var(--btn-primary-color);
    outline-offset: 2px;
  }
</style>
