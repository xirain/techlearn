---
title: åŠ¨æ€è§„åˆ’å®æˆ˜æ•™ç¨‹ï¼ˆC++ï¼‰â€”â€” ä»å…¥é—¨åˆ°è¿›é˜¶çš„ 6 é“ç®—æ³•é¢˜æ¨¡æ¿
description: ä»çŠ¶æ€å®šä¹‰ã€è½¬ç§»æ–¹ç¨‹åˆ°ç©ºé—´ä¼˜åŒ–ï¼Œç»“åˆçˆ¬æ¥¼æ¢¯ã€01èƒŒåŒ…ã€æœ€é•¿å…¬å…±å­åºåˆ—ã€åŒºé—´DPä¸çŠ¶æ€å‹ç¼©ï¼Œç³»ç»ŸæŒæ¡åŠ¨æ€è§„åˆ’è§£é¢˜å¥—è·¯ï¼ˆC++ç‰ˆï¼‰
date: 2026-02-28
categories: [æ•°æ®ç»“æ„]
tags: [c++, åŠ¨æ€è§„åˆ’, ç®—æ³•, æ•™ç¨‹, èƒŒåŒ…é—®é¢˜, LCS, åŒºé—´DP, çŠ¶æ€å‹ç¼©]
---

åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰å¸¸è¢«è¯´æˆâ€œç®—æ³•é¢è¯•åˆ†æ°´å²­â€ï¼šä¼šçš„äººè§‰å¾—æ˜¯æ¨¡æ¿é¢˜ï¼Œä¸ä¼šçš„äººæ„Ÿè§‰æ¯é¢˜éƒ½åƒæ–°é¢˜ã€‚

è¿™ç¯‡æ–‡ç« ç»™ä½ ä¸€ä¸ª**ç”±æµ…å…¥æ·±ã€å¯ç›´æ¥å¥—ç”¨çš„ C++ å®æˆ˜è·¯çº¿**ï¼š

1. å…ˆæŒæ¡ç»Ÿä¸€çš„ DP æ€è€ƒæ¡†æ¶ï¼ˆçŠ¶æ€ã€è½¬ç§»ã€åˆå§‹åŒ–ã€éå†é¡ºåºï¼‰
2. å†åš 6 é“ç»å…¸é¢˜ï¼Œè¦†ç›–çº¿æ€§ DPã€èƒŒåŒ…ã€åºåˆ— DPã€åŒºé—´ DPã€çŠ¶æ€å‹ç¼© DP
3. æ¯é¢˜éƒ½ç»™å‡ºå¯è¿è¡Œ C++ ä»£ç  + å¤æ‚åº¦ + å¸¸è§å‘

> ğŸ“Œ å»ºè®®é˜…è¯»é¡ºåºï¼šç»ƒä¹  1 â†’ 2 â†’ 3 â†’ 4 â†’ 5 â†’ 6ã€‚å‰ 4 é¢˜æ˜¯é«˜é¢‘é¢è¯•æ ¸å¿ƒï¼Œå 2 é¢˜æ‹‰å¼€éš¾åº¦ã€‚

---

## å…ˆå»ºç«‹ä¸€ä¸ªé€šç”¨è§£é¢˜æ¡†æ¶

æ— è®ºé¢˜ç›®çœ‹èµ·æ¥å¤šèŠ±å“¨ï¼Œéƒ½å…ˆå›ç­”ä¸‹é¢ 5 ä¸ªé—®é¢˜ï¼š

1. **çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Ÿ** `dp[i]` / `dp[i][j]` è¡¨ç¤ºä»€ä¹ˆå«ä¹‰ï¼Ÿ
2. **è½¬ç§»ä»å“ªé‡Œæ¥ï¼Ÿ** å½“å‰çŠ¶æ€ç”±å“ªäº›æ›´å°å­é—®é¢˜è½¬ç§»ï¼Ÿ
3. **åˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ** ç¬¬ä¸€ä¸ªçŠ¶æ€å¦‚ä½•æˆç«‹ï¼Ÿ
4. **éå†é¡ºåºæ€ä¹ˆå®šï¼Ÿ** å…ˆç®—è°ï¼Œåç®—è°ï¼Ÿ
5. **ç­”æ¡ˆåœ¨å“ªé‡Œï¼Ÿ** `dp[n]` è¿˜æ˜¯ `max(dp[...])`ï¼Ÿ

ä½ å¯ä»¥æŠŠå®ƒå½“ä½œé¢è¯•å£è¿°æ¨¡æ¿ï¼š

> â€œæˆ‘å…ˆå®šä¹‰çŠ¶æ€ï¼Œå†å†™è½¬ç§»ï¼Œå†è¡¥åˆå§‹åŒ–ï¼Œæœ€åç¡®è®¤éå†é¡ºåºå’Œç­”æ¡ˆä½ç½®ã€‚â€

---

## ç»ƒä¹  1ï¼šçˆ¬æ¥¼æ¢¯ï¼ˆçº¿æ€§ DP å…¥é—¨ï¼‰

**é¢˜ç›®**ï¼šæ¯æ¬¡å¯ä»¥çˆ¬ 1 æˆ– 2 é˜¶ï¼Œé—®åˆ°ç¬¬ `n` é˜¶æœ‰å¤šå°‘ç§æ–¹æ³•ã€‚

### æ€è·¯

- çŠ¶æ€ï¼š`dp[i]` = åˆ°è¾¾ç¬¬ `i` é˜¶çš„æ–¹æ³•æ•°
- è½¬ç§»ï¼š`dp[i] = dp[i-1] + dp[i-2]`
- åˆå§‹åŒ–ï¼š`dp[0]=1`ï¼ˆç«™åœ¨åœ°é¢ç®— 1 ç§ï¼‰ï¼Œ`dp[1]=1`

```cpp
#include <iostream>
#include <vector>
using namespace std;

int climbStairs(int n) {
    if (n <= 1) return 1;
    vector<int> dp(n + 1, 0);
    dp[0] = 1;
    dp[1] = 1;
    for (int i = 2; i <= n; ++i) {
        dp[i] = dp[i - 1] + dp[i - 2];
    }
    return dp[n];
}

int main() {
    cout << climbStairs(5) << "\n"; // 8
}
```

**å¤æ‚åº¦**ï¼šæ—¶é—´ `O(n)`ï¼Œç©ºé—´ `O(n)`ã€‚

### ç©ºé—´ä¼˜åŒ–ï¼ˆæ»šåŠ¨å˜é‡ï¼‰

åªä¾èµ–å‰ä¸¤ä¸ªçŠ¶æ€ï¼Œå¯ä»¥é™åˆ° `O(1)`ï¼š

```cpp
int climbStairsOptimized(int n) {
    if (n <= 1) return 1;
    int a = 1, b = 1; // a=dp[i-2], b=dp[i-1]
    for (int i = 2; i <= n; ++i) {
        int c = a + b;
        a = b;
        b = c;
    }
    return b;
}
```

---

## ç»ƒä¹  2ï¼šæ‰“å®¶åŠ«èˆï¼ˆçº¿æ€§ DP è¿›é˜¶ï¼‰

**é¢˜ç›®**ï¼šæ•°ç»„ `nums` è¡¨ç¤ºæ¯é—´æˆ¿çš„é’±ï¼Œä¸èƒ½å·ç›¸é‚»æˆ¿å­ï¼Œæ±‚æœ€å¤§é‡‘é¢ã€‚

### æ€è·¯

- çŠ¶æ€ï¼š`dp[i]` = å·åˆ°ä¸‹æ ‡ `i` æ—¶çš„æœ€å¤§æ”¶ç›Šï¼ˆè€ƒè™‘ `0..i`ï¼‰
- é€‰æ‹©ï¼š
  - ä¸å· `i`ï¼š`dp[i-1]`
  - å· `i`ï¼š`dp[i-2] + nums[i]`
- è½¬ç§»ï¼š`dp[i] = max(dp[i-1], dp[i-2] + nums[i])`

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

int rob(const vector<int>& nums) {
    int n = (int)nums.size();
    if (n == 0) return 0;
    if (n == 1) return nums[0];

    vector<int> dp(n, 0);
    dp[0] = nums[0];
    dp[1] = max(nums[0], nums[1]);

    for (int i = 2; i < n; ++i) {
        dp[i] = max(dp[i - 1], dp[i - 2] + nums[i]);
    }
    return dp[n - 1];
}

int main() {
    vector<int> nums{2, 7, 9, 3, 1};
    cout << rob(nums) << "\n"; // 12
}
```

**å¸¸è§å‘**ï¼š
- è¾¹ç•Œ `n=0/1/2` å®¹æ˜“æ¼
- `dp[i]` çš„è¯­ä¹‰è¦å›ºå®šï¼Œå¦åˆ™è½¬ç§»ä¼šä¹±

---

## ç»ƒä¹  3ï¼š01 èƒŒåŒ…ï¼ˆç»å…¸äºŒç»´ DPï¼‰

**é¢˜ç›®**ï¼šæœ‰ `n` ä»¶ç‰©å“ï¼Œæ¯ä»¶æœ‰é‡é‡ `w[i]` å’Œä»·å€¼ `v[i]`ï¼ŒèƒŒåŒ…å®¹é‡ `W`ï¼Œæ¯ä»¶æœ€å¤šé€‰ä¸€æ¬¡ã€‚

### äºŒç»´å†™æ³•ï¼ˆå…ˆç†è§£ï¼‰

- çŠ¶æ€ï¼š`dp[i][j]` = åªçœ‹å‰ `i` ä»¶ç‰©å“ã€å®¹é‡ä¸º `j` çš„æœ€å¤§ä»·å€¼
- è½¬ç§»ï¼š
  - ä¸é€‰ç¬¬ `i` ä»¶ï¼š`dp[i-1][j]`
  - é€‰ç¬¬ `i` ä»¶ï¼š`dp[i-1][j-w[i]] + v[i]`ï¼ˆå‰æ `j>=w[i]`ï¼‰

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

int knapsack2D(const vector<int>& w, const vector<int>& v, int W) {
    int n = (int)w.size();
    vector<vector<int>> dp(n + 1, vector<int>(W + 1, 0));

    for (int i = 1; i <= n; ++i) {
        for (int j = 0; j <= W; ++j) {
            dp[i][j] = dp[i - 1][j];
            if (j >= w[i - 1]) {
                dp[i][j] = max(dp[i][j], dp[i - 1][j - w[i - 1]] + v[i - 1]);
            }
        }
    }
    return dp[n][W];
}

int main() {
    vector<int> w{1, 3, 4};
    vector<int> v{15, 20, 30};
    cout << knapsack2D(w, v, 4) << "\n"; // 35
}
```

### ä¸€ç»´ä¼˜åŒ–ï¼ˆé¢è¯•æ›´å¸¸é—®ï¼‰

```cpp
int knapsack1D(const vector<int>& w, const vector<int>& v, int W) {
    int n = (int)w.size();
    vector<int> dp(W + 1, 0);

    for (int i = 0; i < n; ++i) {
        // å…³é”®ï¼š01èƒŒåŒ…å¿…é¡»å€’åºéå†å®¹é‡ï¼Œé¿å…åŒä¸€ç‰©å“é‡å¤ä½¿ç”¨
        for (int j = W; j >= w[i]; --j) {
            dp[j] = max(dp[j], dp[j - w[i]] + v[i]);
        }
    }
    return dp[W];
}
```

**å…³é”®è®°å¿†ç‚¹**ï¼š
- **01 èƒŒåŒ…å€’åº**
- **å®Œå…¨èƒŒåŒ…æ­£åº**ï¼ˆæ¯ä»¶å¯é‡å¤é€‰ï¼‰

---

## ç»ƒä¹  4ï¼šæœ€é•¿å…¬å…±å­åºåˆ— LCSï¼ˆåºåˆ— DPï¼‰

**é¢˜ç›®**ï¼šç»™å®šå­—ç¬¦ä¸² `a`ã€`b`ï¼Œæ±‚æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ã€‚

### æ€è·¯

- çŠ¶æ€ï¼š`dp[i][j]` = `a` å‰ `i` ä¸ªå­—ç¬¦å’Œ `b` å‰ `j` ä¸ªå­—ç¬¦çš„ LCS é•¿åº¦
- è½¬ç§»ï¼š
  - è‹¥ `a[i-1] == b[j-1]`ï¼š`dp[i][j] = dp[i-1][j-1] + 1`
  - å¦åˆ™ï¼š`dp[i][j] = max(dp[i-1][j], dp[i][j-1])`

```cpp
#include <iostream>
#include <vector>
#include <string>
#include <algorithm>
using namespace std;

int lcs(const string& a, const string& b) {
    int n = (int)a.size(), m = (int)b.size();
    vector<vector<int>> dp(n + 1, vector<int>(m + 1, 0));

    for (int i = 1; i <= n; ++i) {
        for (int j = 1; j <= m; ++j) {
            if (a[i - 1] == b[j - 1]) {
                dp[i][j] = dp[i - 1][j - 1] + 1;
            } else {
                dp[i][j] = max(dp[i - 1][j], dp[i][j - 1]);
            }
        }
    }
    return dp[n][m];
}

int main() {
    cout << lcs("abcde", "ace") << "\n"; // 3
}
```

**å¤æ‚åº¦**ï¼šæ—¶é—´ `O(n*m)`ï¼Œç©ºé—´ `O(n*m)`ã€‚

---

## ç»ƒä¹  5ï¼šæˆ³æ°”çƒï¼ˆåŒºé—´ DPï¼‰

**é¢˜ç›®**ï¼šæ•°ç»„ `nums`ï¼Œæ¯æ¬¡æˆ³ç ´ä¸€ä¸ªæ°”çƒ `k`ï¼Œå¾—åˆ†æ˜¯ `nums[left] * nums[k] * nums[right]`ï¼Œæ±‚æœ€å¤§æ€»åˆ†ã€‚

è¿™é¢˜éš¾ç‚¹åœ¨äºï¼š**æœ€åæˆ³å“ªä¸ªæ°”çƒ**æ¯”â€œå…ˆæˆ³å“ªä¸ªâ€æ›´å¥½å»ºæ¨¡ã€‚

### æ€è·¯ï¼ˆåŒºé—´ DP æ ‡å‡†å¥—è·¯ï¼‰

- åœ¨ä¸¤ä¾§è¡¥ `1`ï¼Œå¾—åˆ° `arr`
- çŠ¶æ€ï¼š`dp[l][r]` = å¼€åŒºé—´ `(l, r)` å†…å…¨éƒ¨æˆ³å®Œçš„æœ€å¤§å¾—åˆ†
- æšä¸¾æœ€åä¸€ä¸ªæˆ³çš„ `k`ï¼š
  `dp[l][r] = max(dp[l][k] + dp[k][r] + arr[l]*arr[k]*arr[r])`

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

int maxCoins(vector<int> nums) {
    int n = (int)nums.size();
    vector<int> arr(n + 2, 1);
    for (int i = 0; i < n; ++i) arr[i + 1] = nums[i];

    int N = n + 2;
    vector<vector<int>> dp(N, vector<int>(N, 0));

    // æŒ‰åŒºé—´é•¿åº¦ä»å°åˆ°å¤§
    for (int len = 2; len < N; ++len) {
        for (int l = 0; l + len < N; ++l) {
            int r = l + len;
            for (int k = l + 1; k < r; ++k) {
                dp[l][r] = max(dp[l][r],
                               dp[l][k] + dp[k][r] + arr[l] * arr[k] * arr[r]);
            }
        }
    }
    return dp[0][N - 1];
}

int main() {
    cout << maxCoins({3, 1, 5, 8}) << "\n"; // 167
}
```

**åŒºé—´ DP ä¸¤ä¸ªå›ºå®šé—®é¢˜**ï¼š
- åŒºé—´è¡¨ç¤ºæ˜¯ `[l, r]` è¿˜æ˜¯ `(l, r)`ï¼Ÿ
- å¤–å±‚å¾ªç¯æŒ‰ä»€ä¹ˆé¡ºåºï¼Ÿï¼ˆé€šå¸¸æ˜¯æŒ‰åŒºé—´é•¿åº¦ï¼‰

---

## ç»ƒä¹  6ï¼šæ—…è¡Œå•†é—®é¢˜ TSPï¼ˆçŠ¶æ€å‹ç¼© DPï¼‰

**é¢˜ç›®**ï¼šä»åŸå¸‚ `0` å‡ºå‘ï¼Œè®¿é—®æ‰€æœ‰åŸå¸‚ä¸€æ¬¡å¹¶å›åˆ° `0`ï¼Œæ±‚æœ€çŸ­è·¯å¾„ã€‚

### æ€è·¯

- çŠ¶æ€ï¼š`dp[mask][u]` = ä» `0` å‡ºå‘ï¼Œè®¿é—®é›†åˆ `mask`ï¼Œæœ€ååœåœ¨ `u` çš„æœ€çŸ­è·¯
- è½¬ç§»ï¼šä»ä¸Šä¸€ä¸ªåŸå¸‚ `v` è½¬ç§»åˆ° `u`
- `mask` ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºâ€œè®¿é—®äº†å“ªäº›åŸå¸‚â€

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

int tsp(const vector<vector<int>>& dist) {
    const int INF = 1e9;
    int n = (int)dist.size();
    int S = 1 << n;

    vector<vector<int>> dp(S, vector<int>(n, INF));
    dp[1][0] = 0; // åªè®¿é—®0å·ç‚¹ï¼Œåœåœ¨0å·ç‚¹

    for (int mask = 1; mask < S; ++mask) {
        for (int u = 0; u < n; ++u) {
            if (!(mask & (1 << u))) continue;
            if (dp[mask][u] == INF) continue;

            for (int v = 0; v < n; ++v) {
                if (mask & (1 << v)) continue;
                int nextMask = mask | (1 << v);
                dp[nextMask][v] = min(dp[nextMask][v], dp[mask][u] + dist[u][v]);
            }
        }
    }

    int full = S - 1;
    int ans = INF;
    for (int u = 0; u < n; ++u) {
        ans = min(ans, dp[full][u] + dist[u][0]);
    }
    return ans;
}

int main() {
    vector<vector<int>> dist = {
        {0, 10, 15, 20},
        {10, 0, 35, 25},
        {15, 35, 0, 30},
        {20, 25, 30, 0}
    };
    cout << tsp(dist) << "\n"; // 80
}
```

**å¤æ‚åº¦**ï¼š`O(n^2 * 2^n)`ï¼Œé€‚åˆ `n <= 20` å·¦å³ã€‚

---

## ä¸€å¼ è¡¨æ€»ç»“å¸¸è§ DP ç±»å‹

| ç±»å‹ | å¸¸è§çŠ¶æ€ | å…¸å‹é¢˜ | å…³é”®ç‚¹ |
|---|---|---|---|
| çº¿æ€§ DP | `dp[i]` | çˆ¬æ¥¼æ¢¯ã€æ‰“å®¶åŠ«èˆ | é€šå¸¸åªä¾èµ–å‰å‡ ä¸ªçŠ¶æ€ï¼Œå¯æ»šåŠ¨ä¼˜åŒ– |
| èƒŒåŒ… DP | `dp[i][j]` æˆ– `dp[j]` | 01èƒŒåŒ…ã€å®Œå…¨èƒŒåŒ… | 01å€’åºã€å®Œå…¨æ­£åº |
| åºåˆ— DP | `dp[i][j]` | LCSã€ç¼–è¾‘è·ç¦» | äºŒç»´å«ä¹‰å¿…é¡»å…ˆè®²æ¸…æ¥š |
| åŒºé—´ DP | `dp[l][r]` | æˆ³æ°”çƒã€çŸ³å­åˆå¹¶ | æŒ‰åŒºé—´é•¿åº¦é€’æ¨ |
| çŠ¶å‹ DP | `dp[mask][i]` | TSPã€æœ€çŸ­å“ˆå¯†é¡¿è·¯ | `mask` å«ä¹‰ + ä½è¿ç®—ç†Ÿç»ƒ |

---

## é¢è¯•å®æˆ˜å»ºè®®ï¼šå¦‚ä½• 10 åˆ†é’Ÿå†™å‡º DP

1. **å…ˆè¯´çŠ¶æ€å®šä¹‰ï¼Œä¸æ€¥ç€å†™ä»£ç **ï¼šå¤šæ•°é”™è¯¯éƒ½æ­»åœ¨â€œå®šä¹‰ä¸æ¸…â€ã€‚
2. **å†™å‡º 1~2 ä¸ªå°æ ·ä¾‹æ‰‹æ¨**ï¼šéªŒè¯è½¬ç§»æ˜¯å¦è‡ªæ´½ã€‚
3. **å…ˆå†™æœ´ç´ äºŒç»´ï¼Œå†åšä¼˜åŒ–**ï¼šä¸è¦ä¸€ä¸Šæ¥å°±æ»šåŠ¨æ•°ç»„ã€‚
4. **è¾¹ç•Œå•ç‹¬å¤„ç†**ï¼š`n=0`ã€`n=1`ã€ç©ºå­—ç¬¦ä¸²ã€å®¹é‡ä¸º 0ã€‚
5. **è®°ä½ä¸¤ä¸ªé«˜é¢‘éå†é¡ºåº**ï¼š
   - 01 èƒŒåŒ…ï¼šå®¹é‡å€’åº
   - åŒºé—´ DPï¼šåŒºé—´é•¿åº¦ä»çŸ­åˆ°é•¿

---

## ç»“è¯­

åŠ¨æ€è§„åˆ’å¹¶ä¸æ˜¯â€œçµæ„Ÿé¢˜â€ï¼Œè€Œæ˜¯â€œå»ºæ¨¡é¢˜â€ã€‚

å½“ä½ èƒ½ç¨³å®šå›ç­”â€œçŠ¶æ€æ˜¯ä»€ä¹ˆã€æ€ä¹ˆè½¬ç§»ã€é¡ºåºä¸ºä½•æ­£ç¡®â€æ—¶ï¼ŒDP å°±ä»ç„å­¦å˜æˆäº†æ¨¡æ¿åŒ–å·¥ç¨‹èƒ½åŠ›ã€‚å»ºè®®ä½ æŠŠæœ¬æ–‡ 6 é¢˜å…¨éƒ¨äº²æ‰‹æ•²ä¸€éï¼Œå†æ‰¾ 10 é“åŒç±»å‹é¢˜åšè¿ç§»ç»ƒä¹ ï¼Œæå‡ä¼šéå¸¸æ˜æ˜¾ã€‚

> å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­å†™ä¸‹ä¸€ç¯‡ï¼šã€ŠåŠ¨æ€è§„åˆ’ä¸“é¡¹åˆ·é¢˜æ¸…å•ï¼ˆ30 é¢˜ï¼ŒæŒ‰éš¾åº¦åˆ†å±‚ï¼Œé™„ C++ é¢˜è§£æ¨¡æ¿ï¼‰ã€‹ã€‚
